{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/app/api/products/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs/promises';\nimport path from 'path';\n\nconst dataFilePath = path.join(process.cwd(), 'src/data/products.json');\n\nasync function readProducts() {\n  try {\n    const fileContent = await fs.readFile(dataFilePath, 'utf-8');\n    return JSON.parse(fileContent);\n  } catch (error) {\n    console.error('Error reading products data:', error);\n    return [];\n  }\n}\n\nasync function writeProducts(products: any) {\n  try {\n    await fs.writeFile(dataFilePath, JSON.stringify(products, null, 2));\n  } catch (error) {\n    console.error('Error writing products data:', error);\n  }\n}\n\nexport async function GET() {\n  const products = await readProducts();\n  return NextResponse.json(products);\n}\n\nexport async function POST(request: Request) {\n  const userRole = request.headers.get('X-User-Role');\n  if (userRole !== 'ADMIN') {\n    return NextResponse.json({ message: 'Forbidden' }, { status: 403 });\n  }\n\n  const products = await readProducts();\n  const newProduct = await request.json();\n  // Ensure the new product has a unique ID, especially for POST requests\n  newProduct.product_id = `PROD-${Date.now()}`; \n  products.push(newProduct);\n  await writeProducts(products);\n  return NextResponse.json(newProduct, { status: 201 });\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAE9C,eAAe;IACb,IAAI;QACF,MAAM,cAAc,MAAM,gIAAE,CAAC,QAAQ,CAAC,cAAc;QACpD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,EAAE;IACX;AACF;AAEA,eAAe,cAAc,QAAa;IACxC,IAAI;QACF,MAAM,gIAAE,CAAC,SAAS,CAAC,cAAc,KAAK,SAAS,CAAC,UAAU,MAAM;IAClE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;IAChD;AACF;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM;IACvB,OAAO,sKAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrC,IAAI,aAAa,SAAS;QACxB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAY,GAAG;YAAE,QAAQ;QAAI;IACnE;IAEA,MAAM,WAAW,MAAM;IACvB,MAAM,aAAa,MAAM,QAAQ,IAAI;IACrC,uEAAuE;IACvE,WAAW,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;IAC5C,SAAS,IAAI,CAAC;IACd,MAAM,cAAc;IACpB,OAAO,sKAAY,CAAC,IAAI,CAAC,YAAY;QAAE,QAAQ;IAAI;AACrD"}}]
}