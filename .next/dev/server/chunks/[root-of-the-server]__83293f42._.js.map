{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/app/api/products/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs/promises';\nimport path from 'path';\n\nconst dataFilePath = path.join(process.cwd(), 'src/data/products.json');\n\nasync function readProducts() {\n  try {\n    const fileContent = await fs.readFile(dataFilePath, 'utf-8');\n    return JSON.parse(fileContent);\n  } catch (error) {\n    console.error('Error reading products data:', error);\n    return [];\n  }\n}\n\nasync function writeProducts(products: any) {\n  try {\n    await fs.writeFile(dataFilePath, JSON.stringify(products, null, 2));\n  } catch (error) {\n    console.error('Error writing products data:', error);\n  }\n}\n\nexport async function GET(request: Request, { params }: { params: { id: string | Promise<string> } }) {\n  const resolvedParams = await Promise.resolve(params); // Await params\n  const { id } = resolvedParams;\n\n  const products = await readProducts();\n  const product = products.find((p: any) => p.product_id === id);\n  if (product) {\n    return NextResponse.json(product);\n  } else {\n    return NextResponse.json({ message: 'Product not found' }, { status: 404 });\n  }\n}\n\nexport async function PUT(request: Request, { params }: { params: { id: string | Promise<string> } }) {\n  const resolvedParams = await Promise.resolve(params); // Await params\n  const { id } = resolvedParams;\n\n  const userRole = request.headers.get('X-User-Role');\n  if (userRole !== 'ADMIN') {\n    return NextResponse.json({ message: 'Forbidden' }, { status: 403 });\n  }\n\n  const products = await readProducts();\n  const updatedProduct = await request.json();\n  \n  const index = products.findIndex((p: any) => p.product_id === id);\n  if (index !== -1) {\n    products[index] = { ...products[index], ...updatedProduct };\n    await writeProducts(products);\n    return NextResponse.json(products[index]);\n  } else {\n    return NextResponse.json({ message: 'Product not found' }, { status: 404 });\n  }\n}\n\nexport async function DELETE(request: Request, { params }: { params: { id: string | Promise<string> } }) {\n  const resolvedParams = await Promise.resolve(params); // Await params\n  const { id } = resolvedParams;\n  \n  const userRole = request.headers.get('X-User-Role');\n  if (userRole !== 'ADMIN') {\n    return NextResponse.json({ message: 'Forbidden' }, { status: 403 });\n  }\n  \n  let products = await readProducts();\n  const index = products.findIndex((p: any) => p.product_id === id);\n  if (index !== -1) {\n    products.splice(index, 1);\n    await writeProducts(products);\n    return NextResponse.json({ message: 'Product deleted' });\n  } else {\n    return NextResponse.json({ message: 'Product not found' }, { status: 404 });\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAE9C,eAAe;IACb,IAAI;QACF,MAAM,cAAc,MAAM,gIAAE,CAAC,QAAQ,CAAC,cAAc;QACpD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO,EAAE;IACX;AACF;AAEA,eAAe,cAAc,QAAa;IACxC,IAAI;QACF,MAAM,gIAAE,CAAC,SAAS,CAAC,cAAc,KAAK,SAAS,CAAC,UAAU,MAAM;IAClE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;IAChD;AACF;AAEO,eAAe,IAAI,OAAgB,EAAE,EAAE,MAAM,EAAgD;IAClG,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC,SAAS,eAAe;IACrE,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,MAAM,WAAW,MAAM;IACvB,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAW,EAAE,UAAU,KAAK;IAC3D,IAAI,SAAS;QACX,OAAO,sKAAY,CAAC,IAAI,CAAC;IAC3B,OAAO;QACL,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAoB,GAAG;YAAE,QAAQ;QAAI;IAC3E;AACF;AAEO,eAAe,IAAI,OAAgB,EAAE,EAAE,MAAM,EAAgD;IAClG,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC,SAAS,eAAe;IACrE,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrC,IAAI,aAAa,SAAS;QACxB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAY,GAAG;YAAE,QAAQ;QAAI;IACnE;IAEA,MAAM,WAAW,MAAM;IACvB,MAAM,iBAAiB,MAAM,QAAQ,IAAI;IAEzC,MAAM,QAAQ,SAAS,SAAS,CAAC,CAAC,IAAW,EAAE,UAAU,KAAK;IAC9D,IAAI,UAAU,CAAC,GAAG;QAChB,QAAQ,CAAC,MAAM,GAAG;YAAE,GAAG,QAAQ,CAAC,MAAM;YAAE,GAAG,cAAc;QAAC;QAC1D,MAAM,cAAc;QACpB,OAAO,sKAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM;IAC1C,OAAO;QACL,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAoB,GAAG;YAAE,QAAQ;QAAI;IAC3E;AACF;AAEO,eAAe,OAAO,OAAgB,EAAE,EAAE,MAAM,EAAgD;IACrG,MAAM,iBAAiB,MAAM,QAAQ,OAAO,CAAC,SAAS,eAAe;IACrE,MAAM,EAAE,EAAE,EAAE,GAAG;IAEf,MAAM,WAAW,QAAQ,OAAO,CAAC,GAAG,CAAC;IACrC,IAAI,aAAa,SAAS;QACxB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAY,GAAG;YAAE,QAAQ;QAAI;IACnE;IAEA,IAAI,WAAW,MAAM;IACrB,MAAM,QAAQ,SAAS,SAAS,CAAC,CAAC,IAAW,EAAE,UAAU,KAAK;IAC9D,IAAI,UAAU,CAAC,GAAG;QAChB,SAAS,MAAM,CAAC,OAAO;QACvB,MAAM,cAAc;QACpB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkB;IACxD,OAAO;QACL,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAoB,GAAG;YAAE,QAAQ;QAAI;IAC3E;AACF"}}]
}