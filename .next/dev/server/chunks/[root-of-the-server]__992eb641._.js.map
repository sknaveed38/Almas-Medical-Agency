{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { UserRole } from '@/types/roles';\n\nconst usersFilePath = path.join(process.cwd(), 'src/data/users.json');\n\ninterface User {\n  id: string;\n  email: string;\n  password?: string;\n  role: UserRole;\n  companyName?: string;\n  gstin?: string;\n}\n\nasync function readUsers(): Promise<User[]> {\n  try {\n    const fileContent = await fs.readFile(usersFilePath, 'utf-8');\n    return JSON.parse(fileContent);\n  } catch (error) {\n    console.error('Error reading users data:', error);\n    return [];\n  }\n}\n\nexport async function POST(request: Request) {\n  const { email, password } = await request.json();\n\n  if (!email || !password) {\n    return NextResponse.json({ message: 'Email and password are required' }, { status: 400 });\n  }\n\n  const users = await readUsers();\n  const user = users.find(u => u.email === email && u.password === password); // In real app, compare hashed passwords\n\n  if (user) {\n    // In a real app, generate a JWT token here\n    const simulatedToken = `simulated-jwt-for-${user.id}-${Date.now()}`;\n    return NextResponse.json({ token: simulatedToken, user: { id: user.id, email: user.email, role: user.role } });\n  } else {\n    return NextResponse.json({ message: 'Invalid credentials' }, { status: 401 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGA,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAW/C,eAAe;IACb,IAAI;QACF,MAAM,cAAc,MAAM,gIAAE,CAAC,QAAQ,CAAC,eAAe;QACrD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,EAAE;IACX;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;IAE9C,IAAI,CAAC,SAAS,CAAC,UAAU;QACvB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACzF;IAEA,MAAM,QAAQ,MAAM;IACpB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,SAAS,EAAE,QAAQ,KAAK,WAAW,wCAAwC;IAEpH,IAAI,MAAM;QACR,2CAA2C;QAC3C,MAAM,iBAAiB,CAAC,kBAAkB,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,GAAG,IAAI;QACnE,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;YAAgB,MAAM;gBAAE,IAAI,KAAK,EAAE;gBAAE,OAAO,KAAK,KAAK;gBAAE,MAAM,KAAK,IAAI;YAAC;QAAE;IAC9G,OAAO;QACL,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}