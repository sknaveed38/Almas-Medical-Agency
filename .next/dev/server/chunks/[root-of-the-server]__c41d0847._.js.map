{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/types/roles.ts"],"sourcesContent":["export enum UserRole {\n  REGULAR = 'Regular',\n  WHOLESALER = 'Wholesaler',\n  DISTRIBUTOR = 'Distributor',\n  ADMIN = 'Admin', // Added Admin role\n}\n\nexport const roles = [UserRole.REGULAR, UserRole.WHOLESALER, UserRole.DISTRIBUTOR, UserRole.ADMIN];"],"names":[],"mappings":";;;;;;AAAO,IAAA,AAAK,kCAAA;;;;;WAAA;;AAOL,MAAM,QAAQ;;;;;CAA6E"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/app/api/admin/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { UserRole } from '@/types/roles'; // Assuming UserRole enum is defined here\n\nconst usersFilePath = path.join(process.cwd(), 'src/data/users.json');\n\ninterface User {\n  id: string;\n  email: string;\n  password?: string; // Should be hashed in a real app\n  role: UserRole;\n  companyName?: string;\n  gstin?: string;\n}\n\nasync function readUsers(): Promise<User[]> {\n  try {\n    const fileContent = await fs.readFile(usersFilePath, 'utf-8');\n    return JSON.parse(fileContent);\n  } catch (error) {\n    console.error('Error reading users data:', error);\n    return [];\n  }\n}\n\nexport async function POST(request: Request) {\n  const { email, password } = await request.json();\n\n  if (!email || !password) {\n    return NextResponse.json({ message: 'Email and password are required' }, { status: 400 });\n  }\n\n  const users = await readUsers();\n  const adminUser = users.find(\n    (user) => user.email === email && user.role === UserRole.ADMIN\n  );\n\n  if (!adminUser) {\n    return NextResponse.json({ message: 'Invalid credentials or not an admin' }, { status: 401 });\n  }\n\n  // In a real application, you would hash the password and compare it securely\n  // For this example, we'll do a direct comparison.\n  // We need to ensure the adminUser.password is available for comparison.\n  // If password is not stored in users.json or not provided during creation,\n  // this comparison will fail. For now, assuming it exists.\n  if (adminUser.password !== password) {\n    return NextResponse.json({ message: 'Invalid credentials' }, { status: 401 });\n  }\n\n  // For simplicity, return a dummy token. In a real app, generate a JWT.\n  const token = `admin-token-${adminUser.id}`;\n\n  return NextResponse.json({\n    message: 'Login successful',\n    token,\n    role: UserRole.ADMIN,\n    user: {\n      id: adminUser.id,\n      email: adminUser.email,\n      companyName: adminUser.companyName,\n      gstin: adminUser.gstin,\n    },\n  });\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA,sPAA0C,yCAAyC;;;;;AAEnF,MAAM,gBAAgB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;AAW/C,eAAe;IACb,IAAI;QACF,MAAM,cAAc,MAAM,gIAAE,CAAC,QAAQ,CAAC,eAAe;QACrD,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,EAAE;IACX;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;IAE9C,IAAI,CAAC,SAAS,CAAC,UAAU;QACvB,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACzF;IAEA,MAAM,QAAQ,MAAM;IACpB,MAAM,YAAY,MAAM,IAAI,CAC1B,CAAC,OAAS,KAAK,KAAK,KAAK,SAAS,KAAK,IAAI,KAAK,yJAAQ,CAAC,KAAK;IAGhE,IAAI,CAAC,WAAW;QACd,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAsC,GAAG;YAAE,QAAQ;QAAI;IAC7F;IAEA,6EAA6E;IAC7E,kDAAkD;IAClD,wEAAwE;IACxE,2EAA2E;IAC3E,0DAA0D;IAC1D,IAAI,UAAU,QAAQ,KAAK,UAAU;QACnC,OAAO,sKAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC7E;IAEA,uEAAuE;IACvE,MAAM,QAAQ,CAAC,YAAY,EAAE,UAAU,EAAE,EAAE;IAE3C,OAAO,sKAAY,CAAC,IAAI,CAAC;QACvB,SAAS;QACT;QACA,MAAM,yJAAQ,CAAC,KAAK;QACpB,MAAM;YACJ,IAAI,UAAU,EAAE;YAChB,OAAO,UAAU,KAAK;YACtB,aAAa,UAAU,WAAW;YAClC,OAAO,UAAU,KAAK;QACxB;IACF;AACF"}}]
}