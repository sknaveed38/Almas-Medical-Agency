{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/types/roles.ts"],"sourcesContent":["export enum UserRole {\n  REGULAR = 'Regular',\n  WHOLESALER = 'Wholesaler',\n  DISTRIBUTOR = 'Distributor',\n  ADMIN = 'Admin', // Added Admin role\n}\n\nexport const roles = [UserRole.REGULAR, UserRole.WHOLESALER, UserRole.DISTRIBUTOR, UserRole.ADMIN];"],"names":[],"mappings":";;;;;;AAAO,IAAA,AAAK,kCAAA;;;;;WAAA;;AAOL,MAAM,QAAQ;;;;;CAA6E"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/context/RoleContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useState, useContext, ReactNode, useEffect } from 'react';\nimport { UserRole } from '@/types/roles';\n\n// Extend RoleContextType to include token and potentially more user info\ninterface RoleContextType {\n  currentRole: UserRole;\n  setCurrentRole: (role: UserRole) => void;\n  isLoggedIn: boolean;\n  login: (email: string, role: UserRole, token: string) => void;\n  logout: () => void;\n  token: string | null;\n  userEmail: string | null;\n  loading: boolean; // Add loading state back\n}\n\nconst RoleContext = createContext<RoleContextType | undefined>(undefined);\n\nexport const RoleProvider = ({ children }: { children: ReactNode }) => {\n  const [currentRole, setCurrentRole] = useState<UserRole>(UserRole.REGULAR);\n  const [isLoggedIn, setIsLoggedIn] = useState<boolean>(false);\n  const [token, setToken] = useState<string | null>(null);\n  const [userEmail, setUserEmail] = useState<string | null>(null);\n  const [loading, setLoading] = useState<boolean>(true); // Initialize loading to true\n\n  useEffect(() => {\n    const initializeAuth = async () => {\n      const storedToken = localStorage.getItem('token');\n      const storedRole = localStorage.getItem('currentRole') as UserRole;\n      const storedEmail = localStorage.getItem('currentUserEmail');\n\n      if (storedToken && storedEmail) {\n        setToken(storedToken);\n        setUserEmail(storedEmail);\n        setIsLoggedIn(true);\n        if (storedRole) {\n          setCurrentRole(storedRole);\n        } else {\n          try {\n            const response = await fetch('/api/auth/user', {\n              headers: {\n                'Authorization': `Bearer ${storedToken}`,\n              },\n            });\n            if (response.ok) {\n              const user = await response.json();\n              setCurrentRole(user.role);\n              localStorage.setItem('currentRole', user.role);\n            } else {\n              console.error('Failed to fetch user role, logging out.');\n              logout();\n            }\n          } catch (error) {\n            console.error('Error fetching user role:', error);\n            logout();\n          }\n        }\n      }\n      setLoading(false); // Set loading to false after initialization\n    };\n    initializeAuth();\n  }, [token]); // Re-run when token changes\n\n  const login = (email: string, role: UserRole, authToken: string) => {\n    setToken(authToken);\n    setUserEmail(email);\n    setCurrentRole(role);\n    setIsLoggedIn(true);\n    localStorage.setItem('token', authToken);\n    localStorage.setItem('currentUserEmail', email);\n    localStorage.setItem('currentRole', role);\n  };\n\n  const logout = () => {\n    setToken(null);\n    setUserEmail(null);\n    setCurrentRole(UserRole.REGULAR);\n    setIsLoggedIn(false);\n    localStorage.removeItem('token');\n    localStorage.removeItem('currentUserEmail');\n    localStorage.removeItem('currentRole');\n  };\n\n  return (\n    <RoleContext.Provider value={{ currentRole, setCurrentRole, isLoggedIn, login, logout, token, userEmail, loading }}>\n      {children}\n    </RoleContext.Provider>\n  );\n};\n\nexport const useRole = () => {\n  const context = useContext(RoleContext);\n  if (context === undefined) {\n    throw new Error('useRole must be used within a RoleProvider');\n  }\n  return context;\n};"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAiBA,MAAM,4BAAc,IAAA,iOAAa,EAA8B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,4NAAQ,EAAW,uJAAQ,CAAC,OAAO;IACzE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,4NAAQ,EAAU;IACtD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4NAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,4NAAQ,EAAgB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4NAAQ,EAAU,OAAO,6BAA6B;IAEpF,IAAA,6NAAS,EAAC;QACR,MAAM,iBAAiB;YACrB,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,MAAM,cAAc,aAAa,OAAO,CAAC;YAEzC,IAAI,eAAe,aAAa;gBAC9B,SAAS;gBACT,aAAa;gBACb,cAAc;gBACd,IAAI,YAAY;oBACd,eAAe;gBACjB,OAAO;oBACL,IAAI;wBACF,MAAM,WAAW,MAAM,MAAM,kBAAkB;4BAC7C,SAAS;gCACP,iBAAiB,CAAC,OAAO,EAAE,aAAa;4BAC1C;wBACF;wBACA,IAAI,SAAS,EAAE,EAAE;4BACf,MAAM,OAAO,MAAM,SAAS,IAAI;4BAChC,eAAe,KAAK,IAAI;4BACxB,aAAa,OAAO,CAAC,eAAe,KAAK,IAAI;wBAC/C,OAAO;4BACL,QAAQ,KAAK,CAAC;4BACd;wBACF;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,6BAA6B;wBAC3C;oBACF;gBACF;YACF;YACA,WAAW,QAAQ,4CAA4C;QACjE;QACA;IACF,GAAG;QAAC;KAAM,GAAG,4BAA4B;IAEzC,MAAM,QAAQ,CAAC,OAAe,MAAgB;QAC5C,SAAS;QACT,aAAa;QACb,eAAe;QACf,cAAc;QACd,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,oBAAoB;QACzC,aAAa,OAAO,CAAC,eAAe;IACtC;IAEA,MAAM,SAAS;QACb,SAAS;QACT,aAAa;QACb,eAAe,uJAAQ,CAAC,OAAO;QAC/B,cAAc;QACd,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;IAC1B;IAEA,qBACE,oQAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAa;YAAgB;YAAY;YAAO;YAAQ;YAAO;YAAW;QAAQ;kBAC9G;;;;;;AAGP;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,8NAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Phone, ShoppingCart, User, Search, Menu, X, ChevronDown, LogIn, LogOut, UserCircle } from 'lucide-react';\nimport { useRole } from '@/context/RoleContext';\nimport { UserRole, roles } from '@/types/roles';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation'; // Import useRouter\n\n// Simplified product type for search\ninterface ProductSearchResult {\n  product_id: string;\n  name: string;\n  brand: string;\n  salt: string;\n  image: string;\n}\n\nconst Header = () => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [debouncedQuery, setDebouncedQuery] = useState(searchQuery);\n  const [allProducts, setAllProducts] = useState<ProductSearchResult[]>([]);\n  const [results, setResults] = useState<Record<string, ProductSearchResult[]>>({});\n  const [isResultsVisible, setIsResultsVisible] = useState(false);\n  const searchRef = useRef<HTMLDivElement>(null);\n  const { currentRole, setCurrentRole, isLoggedIn, logout } = useRole(); // Removed setIsLoggedIn\n  const router = useRouter(); // Initialize useRouter\n\n  // Fetch all products on component mount\n  useEffect(() => {\n    const fetchProducts = async () => {\n      const res = await fetch('/api/products');\n      const data = await res.json();\n      setAllProducts(data);\n    };\n\n    fetchProducts();\n  }, []);\n\n  // Debounce effect for search query\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedQuery(searchQuery);\n    }, 300); // 300ms delay\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [searchQuery]);\n\n\n  // Effect for performing the search with the debounced query\n  useEffect(() => {\n    if (debouncedQuery.trim().length > 1) {\n      const lowerCaseQuery = debouncedQuery.toLowerCase();\n      const filteredProducts = allProducts.filter(\n        (product) =>\n          product.name.toLowerCase().includes(lowerCaseQuery) ||\n          product.brand.toLowerCase().includes(lowerCaseQuery) ||\n          product.salt.toLowerCase().includes(lowerCaseQuery)\n      );\n\n      // Group results by salt\n      const groupedResults = filteredProducts.reduce((acc, product) => {\n        const key = product.salt;\n        if (!acc[key]) {\n          acc[key] = [];\n        }\n        acc[key].push(product);\n        return acc;\n      }, {} as Record<string, ProductSearchResult[]>);\n\n      setResults(groupedResults);\n      setIsResultsVisible(true);\n    } else {\n      setResults({});\n      setIsResultsVisible(false);\n    }\n  }, [debouncedQuery, allProducts]);\n\n  // Handle clicks outside of the search component to close results\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\n        setIsResultsVisible(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const handleLogout = () => {\n    logout();\n    router.push('/login'); // Redirect to login page after logout\n  };\n\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen(!isMobileMenuOpen);\n  };\n\n  return (\n    <header className=\"bg-white shadow-md sticky top-0 z-50\">\n      <div className=\"container mx-auto px-4\">\n        {/* Top bar for contact info and Role Switcher */}\n        <div className=\"hidden md:flex justify-between items-center py-2 border-b border-gray-200\">\n          <div className=\"text-sm text-gray-600\">\n            <span>Drug License: 12/AB/3456</span>\n            <span className=\"mx-2\">|</span>\n            <span>GSTIN: 22ABCDE1234F1Z5</span>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n\n            {/* Login/Logout Toggle */}\n            {isLoggedIn ? (\n                <button\n                    onClick={handleLogout}\n                    className=\"flex items-center text-sm font-semibold px-3 py-1 rounded-md bg-red-100 text-red-700 hover:bg-red-200\"\n                >\n                    <LogOut size={14} className=\"mr-1\" />\n                    Logout\n                </button>\n            ) : (\n                <Link\n                    href=\"/login\"\n                    className=\"flex items-center text-sm font-semibold px-3 py-1 rounded-md bg-emerald-100 text-emerald-700 hover:bg-emerald-200\"\n                >\n                    <LogIn size={14} className=\"mr-1\" />\n                    Login\n                </Link>\n            )}\n            <a href=\"tel:+917569724609\" className=\"flex items-center text-sm text-gray-600 hover:text-emerald-600\">\n              <Phone size={14} className=\"mr-1\" />\n              Call Us\n            </a>\n            <a href=\"https://wa.me/917569724609\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center text-sm font-semibold text-green-600 hover:text-green-700\">\n              <img src=\"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg\" alt=\"WhatsApp\" className=\"w-4 h-4 mr-1.5\"/>\n              WhatsApp\n            </a>\n          </div>\n        </div>\n\n        {/* Main header */}\n        <div className=\"flex justify-between items-center pt-4 pb-6 md:py-6\">\n          <div className=\"flex items-center\">\n            <Link href=\"/\" className=\"text-xl sm:text-2xl font-bold text-emerald-700\">\n              Almas<span className=\"font-light\">Medical & Surgical Agency</span>\n            </Link>\n          </div>\n\n          <div className=\"hidden lg:flex flex-1 justify-center px-3\" ref={searchRef}>\n            <div className=\"relative w-full max-w-lg\">\n              <input\n                type=\"text\"\n                placeholder=\"Search by brand, salt, or company...\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-emerald-500\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onFocus={() => setIsResultsVisible(true)}\n              />\n              <div className=\"absolute right-0 top-0 h-full flex items-center\">\n                {searchQuery ? (\n                  <button onClick={() => setSearchQuery('')} className=\"p-2 h-full text-gray-500 hover:text-gray-800\">\n                    <X size={20} />\n                  </button>\n                ) : (\n                  <button className=\"p-2 h-full text-gray-500\">\n                    <Search size={20} />\n                  </button>\n                )}\n              </div>\n\n              {/* Autocomplete Results */}\n              {isResultsVisible && Object.keys(results).length > 0 && (\n                <div className=\"absolute top-full mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\">\n                  {Object.entries(results).map(([salt, productsInGroup]) => (\n                    <div key={salt} className=\"p-2\">\n                      <p className=\"px-3 py-1 text-sm font-semibold text-gray-500\">{salt}</p>\n                      <ul>\n                        {productsInGroup.map((product) => (\n                          <li key={product.product_id}>\n                            <Link href={`/product/${product.product_id}`} className=\"flex items-center p-3 rounded-md hover:bg-gray-100 transition-colors\">\n                              <span className=\"text-gray-400 mr-3\">├</span>\n                              <img src={product.image} alt={product.name} className=\"w-10 h-10 object-contain mr-3 bg-gray-100 rounded\"/>\n                              <div>\n                                <p className=\"font-semibold text-gray-800\">{product.name}</p>\n                                <p className=\"text-xs text-gray-500\">by {product.brand}</p>\n                              </div>\n                            </Link>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  ))}\n                </div>\n              )}\n               {isResultsVisible && Object.keys(results).length === 0 && debouncedQuery.length > 1 && (\n                 <div className=\"absolute top-full mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4\">\n                    <p className=\"text-center text-gray-500\">No products found for \"{debouncedQuery}\"</p>\n                 </div>\n               )}\n            </div>\n          </div>\n\n          <div className=\"hidden md:flex items-center space-x-6\">\n            {isLoggedIn ? (\n              <Link href=\"/dashboard/profile\" className=\"flex items-center text-gray-700 hover:text-emerald-600\">\n                <UserCircle size={20} className=\"mr-1\" />\n                My Profile\n              </Link>\n            ) : (\n              <Link href=\"/login\" className=\"flex items-center text-gray-700 hover:text-emerald-600\">\n                <User size={20} className=\"mr-1\" />\n                Login / Signup\n              </Link>\n            )}\n            <Link href=\"/cart\" className=\"relative flex items-center text-gray-700 hover:text-emerald-600\">\n              <ShoppingCart size={20} className=\"mr-1\" />\n              Bulk Cart\n              <span className=\"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n                3\n              </span>\n            </Link>\n          </div>\n\n          {/* Mobile Menu Button */}\n          <div className=\"md:hidden\">\n            <button\n              className=\"p-2.5 rounded-full bg-gray-200 text-gray-800 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500\"\n              onClick={toggleMobileMenu}\n            >\n              {isMobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Mobile Menu Content */}\n      <div\n        className={`md:hidden bg-white shadow-lg py-0 overflow-hidden transition-all duration-300 ease-in-out ${\n          isMobileMenuOpen ? 'max-h-screen' : 'max-h-0'\n        }`}\n      >\n        <div className=\"container mx-auto px-4 flex flex-col space-y-4\">\n            {/* Mobile Search Bar */}\n            <div className=\"relative w-full\">\n              <input\n                type=\"text\"\n                placeholder=\"Search by brand, salt,company...\"\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-emerald-500\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onFocus={() => setIsResultsVisible(true)}\n              />\n              <div className=\"absolute right-0 top-0 h-full flex items-center\">\n                {searchQuery ? (\n                  <button onClick={() => setSearchQuery('')} className=\"p-2 h-full text-gray-500 hover:text-gray-800\">\n                    <X size={20} />\n                  </button>\n                ) : (\n                  <button className=\"p-2 h-full text-gray-500\">\n                    <Search size={20} />\n                  </button>\n                )}\n              </div>\n\n              {/* Autocomplete Results for Mobile */}\n              {isResultsVisible && Object.keys(results).length > 0 && (\n                <div className=\"absolute top-full mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto\">\n                  {Object.entries(results).map(([salt, productsInGroup]) => (\n                    <div key={salt} className=\"p-2\">\n                      <p className=\"px-3 py-1 text-sm font-semibold text-gray-500\">{salt}</p>\n                      <ul>\n                        {productsInGroup.map((product) => (\n                          <li key={product.product_id}>\n                            <Link href={`/product/${product.product_id}`} className=\"flex items-center p-3 rounded-md hover:bg-gray-100 transition-colors\" onClick={toggleMobileMenu}>\n                              <span className=\"text-gray-400 mr-3\">├</span>\n                              <img src={product.image} alt={product.name} className=\"w-10 h-10 object-contain mr-3 bg-gray-100 rounded\"/>\n                              <div>\n                                <p className=\"font-semibold text-gray-800\">{product.name}</p>\n                                <p className=\"text-xs text-gray-500\">by {product.brand}</p>\n                              </div>\n                            </Link>\n                          </li>\n                        ))}\n                      </ul>\n                    </div>\n                  ))}\n                </div>\n              )}\n               {isResultsVisible && Object.keys(results).length === 0 && debouncedQuery.length > 1 && (\n                 <div className=\"absolute top-full mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg z-50 p-4\">\n                    <p className=\"text-center text-gray-500\">No products found for \"{debouncedQuery}\"</p>\n                 </div>\n               )}\n            </div>\n\n            {isLoggedIn ? (\n              <>\n                <Link href=\"/dashboard/profile\" className=\"flex items-center text-gray-700 hover:text-emerald-600\" onClick={toggleMobileMenu}>\n                  <UserCircle size={20} className=\"mr-2\" />\n                  My Profile\n                </Link>\n                <button\n                    onClick={() => {\n                        handleLogout();\n                        toggleMobileMenu();\n                    }}\n                    className=\"flex items-center text-gray-700 hover:text-emerald-600 w-full text-left\"\n                >\n                    <LogOut size={20} className=\"mr-2\" />\n                    Logout\n                </button>\n              </>\n            ) : (\n              <Link href=\"/login\" className=\"flex items-center text-gray-700 hover:text-emerald-600\" onClick={toggleMobileMenu}>\n                <LogIn size={20} className=\"mr-2\" />\n                Login / Signup\n              </Link>\n            )}\n            <Link href=\"/cart\" className=\"relative flex items-center text-gray-700 hover:text-emerald-600\" onClick={toggleMobileMenu}>\n              <ShoppingCart size={20} className=\"mr-2\" />\n              Bulk Cart\n              <span className=\"absolute -top-1 -right-4 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n                3\n              </span>\n            </Link>\n            <a href=\"tel:+917569724609\" className=\"flex items-center text-gray-700 hover:text-emerald-600 p-1.5 rounded-md bg-gray-100 hover:bg-gray-200\" onClick={toggleMobileMenu}>\n              <Phone size={20} className=\"mr-2\" />\n              Call Us\n            </a>\n            <a href=\"https://wa.me/917569724609\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"flex items-center text-green-600 hover:text-green-700 p-1.5 rounded-md bg-green-50 hover:bg-green-100\" onClick={toggleMobileMenu}>\n              <img src=\"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg\" alt=\"WhatsApp\" className=\"w-5 h-5 mr-2\"/>\n              WhatsApp\n            </a>\n          </div>\n        </div>\n    </header>\n  );\n};\n\nexport default Header;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/components/Footer.tsx"],"sourcesContent":["\"use client\"; // This component now uses client-side hooks\n\nimport React from 'react';\nimport Link from 'next/link'; // Import Link for internal navigation\nimport { useRole } from '@/context/RoleContext'; // Import useRole\nimport { UserRole } from '@/types/roles'; // Import UserRole\n\nconst Footer = () => {\n  const { currentRole } = useRole(); // Get current role from context\n\n  return (\n    <footer className=\"bg-gray-800 text-white mt-16\">\n      <div className=\"container mx-auto px-4 py-10\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8\">\n          {/* Company Info */}\n          <div>\n            <h3 className=\"text-lg font-bold text-emerald-400\">Almas Medical & Surgical Agency</h3>\n            <p className=\"mt-2 text-gray-400 text-sm\">\n              Trusted Pharma Distributor — Wholesale Medicine Supply for Pharmacies & Clinics.\n            </p>\n            <div className=\"mt-4 text-xs text-gray-500\">\n                <p>Drug License: 12/AB/3456</p>\n                <p>GSTIN: 22ABCDE1234F1Z5</p>\n                <p>ISO 9001 Certified</p>\n            </div>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h4 className=\"font-semibold text-gray-200\">Quick Links</h4>\n            <ul className=\"mt-4 space-y-2 text-sm\">\n              <li><Link href=\"/products\" className=\"text-gray-400 hover:text-white\">Products</Link></li>\n              <li><Link href=\"/about\" className=\"text-gray-400 hover:text-white\">About Us</Link></li>\n              <li><Link href=\"/delivery\" className=\"text-gray-400 hover:text-white\">Delivery & Logistics</Link></li>\n              <li><Link href=\"/contact\" className=\"text-gray-400 hover:text-white\">Contact Us</Link></li>\n            </ul>\n          </div>\n\n          {/* B2B Portal */}\n          <div>\n            <h4 className=\"font-semibold text-gray-200\">B2B Portal</h4>\n            <ul className=\"mt-4 space-y-2 text-sm\">\n              <li><Link href=\"/login\" className=\"text-gray-400 hover:text-white\">Client Login</Link></li>\n              <li><Link href=\"/dashboard\" className=\"text-gray-400 hover:text-white\">Dashboard</Link></li>\n              <li><Link href=\"/dashboard/orders\" className=\"text-gray-400 hover:text-white\">My Orders</Link></li>\n              <li><Link href=\"/dashboard/credit\" className=\"text-gray-400 hover:text-white\">Credit Ledger</Link></li>\n              <li><Link href=\"/dashboard/invoices\" className=\"text-gray-400 hover:text-white\">Invoices</Link></li>\n            </ul>\n          </div>\n\n          {/* Legal */}\n          <div>\n            <h4 className=\"font-semibold text-gray-200\">Legal</h4>\n            <ul className=\"mt-4 space-y-2 text-sm\">\n              <li><Link href=\"/privacy\" className=\"text-gray-400 hover:text-white\">Privacy Policy</Link></li>\n              <li><Link href=\"/terms\" className=\"text-gray-400 hover:text-white\">Terms & Conditions</Link></li>\n              <li><Link href=\"/returns\" className=\"text-gray-400 hover:text-white\">Return Policy</Link></li>\n              <li><Link href=\"/admin/login\" className=\"text-gray-400 hover:text-white\">Admin login</Link></li>\n              {currentRole === UserRole.ADMIN && ( // Conditionally render Admin Panel link\n                <li><Link href=\"/admin\" className=\"text-gray-400 hover:text-white\">Admin Panel</Link></li>\n              )}\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"mt-10 pt-6 border-t border-gray-700 text-center text-sm text-gray-500\">\n          <p>&copy; {new Date().getFullYear()} Almas Medical & Surgical Agency. All Rights Reserved.</p>\n          <p className=\"mt-1\">Designed for B2B wholesale distribution.</p>\n        </div>\n      </div>\n    </footer>\n  );\n};\n\nexport default Footer;"],"names":[],"mappings":";;;;;AAGA,oTAA8B,sCAAsC;AACpE,oQAAiD,iBAAiB;AAClE,kPAA0C,kBAAkB;AAL5D,cAAc,4CAA4C;;;;;AAO1D,MAAM,SAAS;IACb,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,+JAAO,KAAI,gCAAgC;IAEnE,qBACE,oQAAC;QAAO,WAAU;kBAChB,cAAA,oQAAC;YAAI,WAAU;;8BACb,oQAAC;oBAAI,WAAU;;sCAEb,oQAAC;;8CACC,oQAAC;oCAAG,WAAU;8CAAqC;;;;;;8CACnD,oQAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAG1C,oQAAC;oCAAI,WAAU;;sDACX,oQAAC;sDAAE;;;;;;sDACH,oQAAC;sDAAE;;;;;;sDACH,oQAAC;sDAAE;;;;;;;;;;;;;;;;;;sCAKT,oQAAC;;8CACC,oQAAC;oCAAG,WAAU;8CAA8B;;;;;;8CAC5C,oQAAC;oCAAG,WAAU;;sDACZ,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAY,WAAU;0DAAiC;;;;;;;;;;;sDACtE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAiC;;;;;;;;;;;sDACnE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAY,WAAU;0DAAiC;;;;;;;;;;;sDACtE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAiC;;;;;;;;;;;;;;;;;;;;;;;sCAKzE,oQAAC;;8CACC,oQAAC;oCAAG,WAAU;8CAA8B;;;;;;8CAC5C,oQAAC;oCAAG,WAAU;;sDACZ,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAiC;;;;;;;;;;;sDACnE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAa,WAAU;0DAAiC;;;;;;;;;;;sDACvE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAoB,WAAU;0DAAiC;;;;;;;;;;;sDAC9E,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAoB,WAAU;0DAAiC;;;;;;;;;;;sDAC9E,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAsB,WAAU;0DAAiC;;;;;;;;;;;;;;;;;;;;;;;sCAKpF,oQAAC;;8CACC,oQAAC;oCAAG,WAAU;8CAA8B;;;;;;8CAC5C,oQAAC;oCAAG,WAAU;;sDACZ,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAiC;;;;;;;;;;;sDACrE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAiC;;;;;;;;;;;sDACnE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAiC;;;;;;;;;;;sDACrE,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAe,WAAU;0DAAiC;;;;;;;;;;;wCACxE,gBAAgB,uJAAQ,CAAC,KAAK,kBAC7B,oQAAC;sDAAG,cAAA,oQAAC,6LAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAiC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAM3E,oQAAC;oBAAI,WAAU;;sCACb,oQAAC;;gCAAE;gCAAQ,IAAI,OAAO,WAAW;gCAAG;;;;;;;sCACpC,oQAAC;4BAAE,WAAU;sCAAO;;;;;;;;;;;;;;;;;;;;;;;AAK9B;uCAEe"}},
    {"offset": {"line": 1427, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/components/ScrollToTopButton.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { ChevronUp } from 'lucide-react';\n\nconst ScrollToTopButton = () => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  // Show button when page is scrolled up to \"top\"\n  const toggleVisibility = () => {\n    if (window.scrollY > 300) { // Show button after scrolling 300px\n      setIsVisible(true);\n    } else {\n      setIsVisible(false);\n    }\n  };\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', toggleVisibility);\n    return () => {\n      window.removeEventListener('scroll', toggleVisibility);\n    };\n  }, []);\n\n  return (\n    <div className=\"fixed bottom-4 right-4 z-50 md:hidden\"> {/* Only visible on mobile */}\n      {isVisible && (\n        <button\n          onClick={scrollToTop}\n          className=\"bg-emerald-600 text-white p-3 rounded-full shadow-lg hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-opacity-75 transition-opacity duration-300\"\n        >\n          <ChevronUp size={24} />\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default ScrollToTopButton;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,oBAAoB;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,4NAAQ,EAAC;IAE3C,gDAAgD;IAChD,MAAM,mBAAmB;QACvB,IAAI,OAAO,OAAO,GAAG,KAAK;YACxB,aAAa;QACf,OAAO;YACL,aAAa;QACf;IACF;IAEA,MAAM,cAAc;QAClB,OAAO,QAAQ,CAAC;YACd,KAAK;YACL,UAAU;QACZ;IACF;IAEA,IAAA,6NAAS,EAAC;QACR,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;QACvC;IACF,GAAG,EAAE;IAEL,qBACE,oQAAC;QAAI,WAAU;;YAAwC;YACpD,2BACC,oQAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,oQAAC,mPAAS;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAK3B;uCAEe"}},
    {"offset": {"line": 1491, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SHAIK%20SHAFIYA/Desktop/medical/src/context/CartContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useState, useEffect, useContext, ReactNode } from 'react';\nimport { Product } from '@/components/ProductCard'; // Assuming Product interface is exportable\nimport { useRole } from '@/context/RoleContext';\nimport { UserRole } from '@/types/roles';\n\n// Define the structure of a cart item\ninterface CartItem {\n  product_id: string;\n  name: string;\n  brand: string;\n  image: string;\n  price: number; // Price at the time of adding to cart\n  quantity: number;\n  moq: number; // Minimum Order Quantity for this product\n}\n\n// Define the shape of the CartContext\ninterface CartContextType {\n  cartItems: CartItem[];\n  addItem: (product: Product, quantity: number) => void;\n  removeItem: (productId: string) => void;\n  updateItemQuantity: (productId: string, quantity: number) => void;\n  clearCart: () => void;\n  getTotalItems: () => number;\n  getTotalPrice: () => number;\n}\n\n// Create the context with a default undefined value\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\n// CartProvider component to wrap the application\nexport const CartProvider = ({ children }: { children: ReactNode }) => {\n  const { currentRole } = useRole();\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n\n  // Load cart from localStorage on initial render\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const storedCart = localStorage.getItem('cart');\n      if (storedCart) {\n        setCartItems(JSON.parse(storedCart));\n      }\n    }\n  }, []);\n\n  // Save cart to localStorage whenever it changes\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      localStorage.setItem('cart', JSON.stringify(cartItems));\n    }\n  }, [cartItems]);\n\n  const addItem = (product: Product, quantity: number) => {\n    setCartItems((prevItems) => {\n      const existingItem = prevItems.find((item) => item.product_id === product.product_id);\n\n      if (existingItem) {\n        // Update quantity of existing item\n        const newQuantity = existingItem.quantity + quantity;\n        if (newQuantity < product.moq) {\n          alert(`Quantity for ${product.name} must be at least ${product.moq} units.`);\n          return prevItems;\n        }\n        return prevItems.map((item) =>\n          item.product_id === product.product_id ? { ...item, quantity: newQuantity } : item\n        );\n      } else {\n        // Add new item\n        if (quantity < product.moq) {\n            alert(`Quantity for ${product.name} must be at least ${product.moq} units.`);\n            return prevItems;\n        }\n        // Safely get price, default to 0 if undefined/null\n        const itemPrice = product.pricing?.[currentRole] || product.pricing?.[UserRole.REGULAR] || product.price_mrp || 0;\n        return [...prevItems, {\n            product_id: product.product_id,\n            name: product.name,\n            brand: product.brand,\n            image: product.image,\n            price: itemPrice, // Use current role's price or MRP\n            quantity,\n            moq: product.moq,\n        }];\n      }\n    });\n  };\n\n  const removeItem = (productId: string) => {\n    setCartItems((prevItems) => prevItems.filter((item) => item.product_id !== productId));\n  };\n\n  const updateItemQuantity = (productId: string, quantity: number) => {\n    setCartItems((prevItems) =>\n      prevItems\n        .map((item) => (item.product_id === productId ? { ...item, quantity } : item))\n        .filter((item) => item.quantity > 0) // Remove if quantity becomes 0 or less\n    );\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n  };\n\n  const getTotalItems = () => {\n    return cartItems.reduce((total, item) => total + item.quantity, 0);\n  };\n\n  const getTotalPrice = () => {\n    return cartItems.reduce((total, item) => total + item.price * item.quantity, 0);\n  };\n\n  return (\n    <CartContext.Provider value={{ cartItems, addItem, removeItem, updateItemQuantity, clearCart, getTotalItems, getTotalPrice }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\n// Custom hook to use the CartContext\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AACA;AALA;;;;;AA6BA,oDAAoD;AACpD,MAAM,4BAAc,IAAA,iOAAa,EAA8B;AAGxD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;IAChE,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,+JAAO;IAC/B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,4NAAQ,EAAa,EAAE;IAEzD,gDAAgD;IAChD,IAAA,6NAAS,EAAC;QACR;;IAMF,GAAG,EAAE;IAEL,gDAAgD;IAChD,IAAA,6NAAS,EAAC;QACR;;IAGF,GAAG;QAAC;KAAU;IAEd,MAAM,UAAU,CAAC,SAAkB;QACjC,aAAa,CAAC;YACZ,MAAM,eAAe,UAAU,IAAI,CAAC,CAAC,OAAS,KAAK,UAAU,KAAK,QAAQ,UAAU;YAEpF,IAAI,cAAc;gBAChB,mCAAmC;gBACnC,MAAM,cAAc,aAAa,QAAQ,GAAG;gBAC5C,IAAI,cAAc,QAAQ,GAAG,EAAE;oBAC7B,MAAM,CAAC,aAAa,EAAE,QAAQ,IAAI,CAAC,kBAAkB,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC;oBAC3E,OAAO;gBACT;gBACA,OAAO,UAAU,GAAG,CAAC,CAAC,OACpB,KAAK,UAAU,KAAK,QAAQ,UAAU,GAAG;wBAAE,GAAG,IAAI;wBAAE,UAAU;oBAAY,IAAI;YAElF,OAAO;gBACL,eAAe;gBACf,IAAI,WAAW,QAAQ,GAAG,EAAE;oBACxB,MAAM,CAAC,aAAa,EAAE,QAAQ,IAAI,CAAC,kBAAkB,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC;oBAC3E,OAAO;gBACX;gBACA,mDAAmD;gBACnD,MAAM,YAAY,QAAQ,OAAO,EAAE,CAAC,YAAY,IAAI,QAAQ,OAAO,EAAE,CAAC,uJAAQ,CAAC,OAAO,CAAC,IAAI,QAAQ,SAAS,IAAI;gBAChH,OAAO;uBAAI;oBAAW;wBAClB,YAAY,QAAQ,UAAU;wBAC9B,MAAM,QAAQ,IAAI;wBAClB,OAAO,QAAQ,KAAK;wBACpB,OAAO,QAAQ,KAAK;wBACpB,OAAO;wBACP;wBACA,KAAK,QAAQ,GAAG;oBACpB;iBAAE;YACJ;QACF;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,aAAa,CAAC,YAAc,UAAU,MAAM,CAAC,CAAC,OAAS,KAAK,UAAU,KAAK;IAC7E;IAEA,MAAM,qBAAqB,CAAC,WAAmB;QAC7C,aAAa,CAAC,YACZ,UACG,GAAG,CAAC,CAAC,OAAU,KAAK,UAAU,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI,MACvE,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,GAAG,GAAG,uCAAuC;;IAElF;IAEA,MAAM,YAAY;QAChB,aAAa,EAAE;IACjB;IAEA,MAAM,gBAAgB;QACpB,OAAO,UAAU,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAClE;IAEA,MAAM,gBAAgB;QACpB,OAAO,UAAU,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;IAC/E;IAEA,qBACE,oQAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAW;YAAS;YAAY;YAAoB;YAAW;YAAe;QAAc;kBACxH;;;;;;AAGP;AAGO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,8NAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}}]
}