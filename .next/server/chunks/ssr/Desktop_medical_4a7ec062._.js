module.exports=[44261,a=>{"use strict";a.s(["getSoonestExpiry",0,a=>a.batches&&0!==a.batches.length?[...a.batches].sort((a,b)=>new Date(a.expiry).getTime()-new Date(b.expiry).getTime())[0].expiry:null,"isNearExpiry",0,(a,b=3)=>{if(!a.batches||0===a.batches.length)return!1;let c=new Date,d=new Date;for(let e of(d.setMonth(c.getMonth()+b),a.batches)){let a=new Date(e.expiry);if(a<=d&&a>=c)return!0}return!1}])},54398,a=>{"use strict";let b=(0,a.i(51393).default)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],54398)},54992,a=>{"use strict";let b=(0,a.i(51393).default)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);a.s(["Truck",()=>b],54992)},8735,a=>{"use strict";let b=(0,a.i(51393).default)("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);a.s(["Stethoscope",()=>b],8735)},1691,a=>{"use strict";var b=a.i(30277),c=a.i(45623),d=a.i(70151),e=a.i(54398),f=a.i(51393);let g=(0,f.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var h=a.i(54992);let i=(0,f.default)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var j=a.i(8735),k=a.i(21204),l=a.i(88176),m=a.i(44261),n=a.i(39161),o=a.i(95903);a.s(["default",0,({params:a})=>{let{productId:f}=a,{currentRole:p,isLoggedIn:q}=(0,k.useRole)(),{addItem:r}=(0,o.useCart)(),s=(0,c.useRef)(null),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(null);if((0,c.useEffect)(()=>{!async function(){try{w(!0);let a=await fetch(`/api/products/${f}`);if(!a.ok){if(404===a.status){y("Product not found"),u(null);return}throw Error(`HTTP error! status: ${a.status}`)}let b=await a.json(),c={...b,pricing:b.pricing?JSON.parse(b.pricing):{},batches:b.batches?JSON.parse(b.batches):[]};u(c)}catch(a){console.error("Failed to fetch product:",a),y(a.message||"An unexpected error occurred."),u(null)}finally{w(!1)}}()},[f]),v)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 text-center text-gray-600",children:"Loading product details..."});if(x)return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-12 text-center text-red-600",children:["Error: ",x]});if(!t)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 text-center text-gray-600",children:"Product not found."});let z=t.pricing[p]||t.pricing[l.UserRole.REGULAR],A=(0,m.isNearExpiry)(t),B=t.stock_badge;return B="Out of stock"===t.stock_badge?"Out of stock":"Low stock"===t.stock_badge?"Low stock":A?"Near expiry — discounted":"In stock",(0,b.jsx)("div",{className:"bg-white",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[(0,b.jsx)("div",{className:"bg-gray-100 rounded-lg p-8 flex justify-center items-center",children:(0,b.jsx)("img",{src:t.image,alt:t.name,className:"max-h-96 object-contain"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-full ${{"In stock":"bg-emerald-100 text-emerald-800","Low stock":"bg-yellow-100 text-yellow-800","Out of stock":"bg-red-100 text-red-800","Near expiry — discounted":"bg-blue-100 text-blue-800"}[B]}`,children:B}),(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mt-4",children:t.name}),(0,b.jsxs)("p",{className:"text-lg text-gray-500 mt-2",children:["By ",(0,b.jsx)("span",{className:"font-semibold text-emerald-600",children:t.brand})]}),(0,b.jsxs)("p",{className:"text-md text-gray-600 mt-1",children:["Generic Salt: ",(0,b.jsx)("span",{className:"font-medium",children:t.salt})]}),(0,b.jsxs)("div",{className:"mt-6",children:[q?(0,b.jsxs)("p",{className:"text-4xl font-bold text-emerald-700",children:["₹",z.toFixed(2),(0,b.jsxs)("span",{className:"text-lg font-normal text-gray-500",children:[" / box (",p,")"]})]}):(0,b.jsxs)("p",{className:"text-4xl font-bold text-gray-500",children:[(0,b.jsx)(n.default,{href:"/login",className:"text-emerald-600 hover:underline",children:"Login"})," to view price"]}),(0,b.jsxs)("p",{className:"text-md text-gray-500 line-through mt-1",children:["MRP: ₹",t.price_mrp.toFixed(2)]})]}),t.is_prescription_required&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-red-50 border border-red-300 rounded-lg flex items-center",children:[(0,b.jsx)(j.Stethoscope,{className:"w-6 h-6 text-red-500 mr-3"}),(0,b.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"Caution: This is a prescription medicine. It should be used only under medical supervision."})]}),(0,b.jsx)("div",{className:"mt-6 border-t pt-6",children:(0,b.jsxs)("div",{className:"space-y-4 text-gray-700",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Pack Size:"})," ",t.pack_size]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Minimum Order Quantity (MOQ):"})," ",t.moq," units"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"GST Rate:"})," ",t.gst_rate,"%"]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"HSN Code:"})," ",t.hsn_code]})]})}),t.batches&&t.batches.length>0&&(0,b.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Available Batches"}),(0,b.jsx)("ul",{className:"space-y-2",children:t.batches.map(a=>{let c=new Date(a.expiry),d=new Date,e=new Date;e.setMonth(d.getMonth()+3);let f=c<=e&&c>=d;return(0,b.jsxs)("li",{className:`flex items-center p-3 rounded-md ${f?"bg-red-50 border border-red-300":"bg-gray-50"}`,children:[(0,b.jsx)(i,{className:`w-5 h-5 mr-3 ${f?"text-red-500":"text-gray-500"}`}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium text-gray-800",children:["Batch No: ",a.batch_no]}),(0,b.jsxs)("p",{className:`text-sm ${f?"text-red-600 font-semibold":"text-gray-600"}`,children:["Expiry: ",c.toLocaleDateString("en-US")," (",a.qty," units)"]})]})]},a.batch_no)})})]}),(0,b.jsxs)("div",{className:"mt-8 flex items-center gap-4",children:[(0,b.jsx)("input",{type:"number",defaultValue:t.moq,min:t.moq,className:"w-24 px-4 py-3 border border-gray-300 rounded-lg text-center font-semibold focus:outline-none focus:ring-2 focus:ring-emerald-500",disabled:"Out of stock"===t.stock_badge||!q,ref:s}),(0,b.jsxs)("button",{className:`w-full flex items-center justify-center px-6 py-3 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white ${"Out of stock"===t.stock_badge||!q?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"}`,disabled:"Out of stock"===t.stock_badge||!q,onClick:()=>{let a=parseInt(s.current?.value||"0",10);isNaN(a)||a<t.moq?alert(`Please enter a quantity of at least ${t.moq} units.`):(r(t,a),alert(`Added ${a} of ${t.name} to Bulk Cart.`))},children:[(0,b.jsx)(d.ShoppingCart,{className:"mr-3"}),"Add to Bulk Cart"]})]}),(0,b.jsx)("p",{className:"text-center text-gray-500 text-sm mt-3",children:"Out of stock"!==t.stock_badge?"Dispatch in 24–48 hrs":"Currently unavailable"})]})]}),(0,b.jsx)("div",{className:"mt-16 border-t pt-10",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(e.CheckCircle,{className:"w-10 h-10 text-emerald-500 mb-2"}),(0,b.jsx)("h4",{className:"font-semibold",children:"Quality Assured"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"100% genuine products from licensed sources."})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(g,{className:"w-10 h-10 text-emerald-500 mb-2"}),(0,b.jsx)("h4",{className:"font-semibold",children:"Secure Payments"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"GST-compliant invoicing and secure payment gateway."})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)(h.Truck,{className:"w-10 h-10 text-emerald-500 mb-2"}),(0,b.jsx)("h4",{className:"font-semibold",children:"Reliable Delivery"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Fast and reliable delivery across the region."})]})]})})]})})}],1691)}];

//# sourceMappingURL=Desktop_medical_4a7ec062._.js.map