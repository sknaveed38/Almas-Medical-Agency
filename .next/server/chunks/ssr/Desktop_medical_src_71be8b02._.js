module.exports=[44261,a=>{"use strict";a.s(["getSoonestExpiry",0,a=>a.batches&&0!==a.batches.length?[...a.batches].sort((a,b)=>new Date(a.expiry).getTime()-new Date(b.expiry).getTime())[0].expiry:null,"isNearExpiry",0,(a,b=3)=>{if(!a.batches||0===a.batches.length)return!1;let c=new Date,d=new Date;for(let e of(d.setMonth(c.getMonth()+b),a.batches)){let a=new Date(e.expiry);if(a<=d&&a>=c)return!0}return!1}])},25292,a=>{"use strict";var b=a.i(30277),c=a.i(45623),d=a.i(70151),e=a.i(21204),f=a.i(88176),g=a.i(44261),h=a.i(39161),i=a.i(95903);let j={"In stock":"bg-emerald-100 text-emerald-800","Low stock":"bg-yellow-100 text-yellow-800","Out of stock":"bg-red-100 text-red-800","Near expiry — discounted":"bg-blue-100 text-blue-800"};a.s(["default",0,({product:a})=>{let{currentRole:k,isLoggedIn:l}=(0,e.useRole)(),{addItem:m}=(0,i.useCart)(),n=(0,g.isNearExpiry)(a),o=(0,g.getSoonestExpiry)(a),p=(0,c.useRef)(null),q=a.stock_badge;n&&"Out of stock"!==a.stock_badge&&(q="Near expiry — discounted");let r="Out of stock"===q,s=a.pricing?.[k]||a.pricing?.[f.UserRole.REGULAR]||0;return(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col justify-between hover:shadow-lg transition-shadow duration-300 bg-white",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"relative w-full h-40 bg-gray-100 rounded-md mb-4 flex items-center justify-center",children:[n&&(0,b.jsx)("div",{className:"absolute top-0 left-0 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-br-lg",children:"DEAL"}),(0,b.jsx)("img",{src:a.image,alt:a.name,className:"max-h-full max-w-full p-2 object-contain"}),(0,b.jsx)("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full ${j[q]}`,children:q})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:a.brand}),(0,b.jsx)("h3",{className:"text-md font-semibold text-gray-800 mt-1 truncate",title:a.name,children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.pack_size}),n&&o&&(0,b.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["Expires: ",new Date(o).toLocaleDateString()]}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["MOQ: ",(0,b.jsxs)("span",{className:"font-bold text-gray-700",children:[a.moq," units"]})]})})]}),(0,b.jsxs)("div",{className:"mt-4",children:[l?(0,b.jsxs)("p",{className:"text-lg font-bold text-emerald-600",children:["number"==typeof s?`₹${s.toFixed(2)}`:"N/A",(0,b.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"/box"})]}):(0,b.jsxs)("p",{className:"text-lg font-bold text-gray-500",children:[(0,b.jsx)(h.default,{href:"/login",className:"text-emerald-600 hover:underline",children:"Login"})," to view price"]}),(0,b.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,b.jsx)("input",{type:"number",min:a.moq,defaultValue:a.moq,className:"w-20 px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-emerald-500 text-center",disabled:r||!l,ref:p}),(0,b.jsxs)("button",{className:`w-full flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${r||!l?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"}`,disabled:r||!l,onClick:()=>{let b=parseInt(p.current?.value||"0",10);isNaN(b)||b<a.moq?alert(`Please enter a quantity of at least ${a.moq} units.`):(m(a,b),alert(`Added ${b} of ${a.name} to cart.`))},children:[(0,b.jsx)(d.ShoppingCart,{size:16,className:"mr-2"}),"Add"]})]}),r&&(0,b.jsx)("p",{className:"text-center text-red-600 text-xs mt-2",children:"Currently unavailable"}),!r&&(0,b.jsx)("p",{className:"text-center text-gray-500 text-xs mt-2",children:"Dispatch in 24-48 hrs"})]})]})}])},33311,a=>{"use strict";var b=a.i(30277),c=a.i(45623),d=a.i(25292),e=a.i(88176),f=a.i(44261);let g=(0,a.i(51393).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var h=a.i(42177);a.s(["default",0,()=>{let a=(0,h.useSearchParams)(),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)("All"),[m,n]=(0,c.useState)("All"),[o,p]=(0,c.useState)("name-asc"),[q,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{let a=await fetch("/api/products");j(await a.json())})()},[]),(0,c.useEffect)(()=>{let b=a.get("category");b&&l(b),"near"===a.get("expiry")&&r(!0)},[a]);let s=(0,c.useMemo)(()=>["All",...new Set(i.map(a=>a.category))].sort(),[i]),t=(0,c.useMemo)(()=>["All",...new Set(i.map(a=>a.brand))].sort(),[i]),u=(0,c.useMemo)(()=>{let a=i;return"All"!==k&&(a=a.filter(a=>a.category===k)),"All"!==m&&(a=a.filter(a=>a.brand===m)),q&&(a=a.filter(a=>(0,f.isNearExpiry)(a))),a.sort((a,b)=>{switch(o){case"name-asc":return a.name.localeCompare(b.name);case"price-asc":return a.pricing[e.UserRole.REGULAR]-b.pricing[e.UserRole.REGULAR];case"price-desc":let c=a.pricing[e.UserRole.REGULAR];return b.pricing[e.UserRole.REGULAR]-c;case"expiry-asc":let d=a=>new Date(a.batches&&0!==a.batches.length?Math.min(...a.batches.map(a=>new Date(a.expiry).getTime())):"9999-12-31");return d(a).getTime()-d(b).getTime();default:return 0}}),a},[i,k,m,o,q]);return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Wholesale Catalogue"}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8 flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g,{className:"w-5 h-5 text-gray-600"}),(0,b.jsx)("label",{htmlFor:"category-filter",className:"text-gray-700 font-medium",children:"Category:"}),(0,b.jsx)("select",{id:"category-filter",value:k,onChange:a=>l(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:s.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"brand-filter",className:"text-gray-700 font-medium",children:"Brand:"}),(0,b.jsx)("select",{id:"brand-filter",value:m,onChange:a=>n(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:t.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{htmlFor:"sort-by",className:"text-gray-700 font-medium",children:"Sort By:"}),(0,b.jsxs)("select",{id:"sort-by",value:o,onChange:a=>p(a.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[(0,b.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,b.jsx)("option",{value:"price-asc",children:"Price (Low to High)"}),(0,b.jsx)("option",{value:"price-desc",children:"Price (High to Low)"}),(0,b.jsx)("option",{value:"expiry-asc",children:"Near Expiry First"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"near-expiry-checkbox",checked:q,onChange:a=>r(a.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"near-expiry-checkbox",className:"text-gray-700 font-medium",children:"Show Near Expiry Deals"})]})]}),u.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:u.map(a=>(0,b.jsx)(d.default,{product:a},a.id))}):(0,b.jsxs)("div",{className:"text-center py-10",children:[(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"No products found matching your criteria."}),(0,b.jsx)("p",{className:"text-md text-gray-500",children:"Try adjusting your filters or search terms."})]})]})}],33311)}];

//# sourceMappingURL=Desktop_medical_src_71be8b02._.js.map