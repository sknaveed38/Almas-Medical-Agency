module.exports=[40117,a=>{"use strict";var b=a.i(30277),c=a.i(45623),d=a.i(42177);let e=[{month:"Jan",sales:12e5},{month:"Feb",sales:15e5},{month:"Mar",sales:13e5},{month:"Apr",sales:17e5},{month:"May",sales:16e5},{month:"Jun",sales:19e5}];var f=a.i(51393);let g=(0,f.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),h=(0,f.default)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),i=(0,f.default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var j=a.i(21204),k=a.i(88176);let l=({onEdit:a,onDelete:d,refreshTrigger:e})=>{let[f,g]=(0,c.useState)([]),h=async()=>{try{let a=await fetch("/api/products");if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let b=await a.json();g(b)}catch(a){console.error("Failed to fetch products:",a)}};return(0,c.useEffect)(()=>{h()},[e]),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Manage Products"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full bg-white",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Name"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Brand"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Category"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Stock"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b text-right",children:"Regular Price"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b text-right",children:"Wholesaler Price"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b text-right",children:"Distributor Price"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b text-right",children:"Admin Price"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:f.map(c=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:c.name}),(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:c.brand}),(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:c.category}),(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:c.stock_qty}),(0,b.jsxs)("td",{className:"py-2 px-4 border-b text-right",children:["₹",c.pricing[k.UserRole.REGULAR]?.toFixed(2)||"N/A"]}),(0,b.jsxs)("td",{className:"py-2 px-4 border-b text-right",children:["₹",c.pricing[k.UserRole.WHOLESALER]?.toFixed(2)||"N/A"]}),(0,b.jsxs)("td",{className:"py-2 px-4 border-b text-right",children:["₹",c.pricing[k.UserRole.DISTRIBUTOR]?.toFixed(2)||"N/A"]}),(0,b.jsxs)("td",{className:"py-2 px-4 border-b text-right",children:["₹",c.pricing[k.UserRole.ADMIN]?.toFixed(2)||"N/A"]}),(0,b.jsxs)("td",{className:"py-2 px-4 border-b",children:[(0,b.jsx)("button",{onClick:()=>a(c),className:"text-emerald-600 hover:underline mr-4",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>d(c.id),className:"text-red-600 hover:underline",children:"Delete"})]})]},c.id))})]})})]})},m=({product:a,onSave:d,onClose:e})=>{let[f,g]=(0,c.useState)(a||{pricing:{[k.UserRole.REGULAR]:0,[k.UserRole.WHOLESALER]:0,[k.UserRole.DISTRIBUTOR]:0,[k.UserRole.ADMIN]:0},moq:1,stock_qty:0});(0,c.useEffect)(()=>{g(a||{pricing:{[k.UserRole.REGULAR]:0,[k.UserRole.WHOLESALER]:0,[k.UserRole.DISTRIBUTOR]:0,[k.UserRole.ADMIN]:0},moq:1,stock_qty:0})},[a]);let h=a=>{let{name:b,value:c}=a.target;g(a=>({...a,[b]:c}))},i=a=>{let{name:b,value:c}=a.target;g(a=>{let d={[k.UserRole.REGULAR]:0,[k.UserRole.WHOLESALER]:0,[k.UserRole.DISTRIBUTOR]:0,[k.UserRole.ADMIN]:0};return{...a,pricing:{...d,...a.pricing,[b]:Number(c)}}})};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,b.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:a?"Edit Product":"Add New Product"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),d(f)},className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Product Name"}),(0,b.jsx)("input",{type:"text",name:"name",value:f.name||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Brand"}),(0,b.jsx)("input",{type:"text",name:"brand",value:f.brand||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pack Size"}),(0,b.jsx)("input",{type:"text",name:"pack_size",value:f.pack_size||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,b.jsx)("input",{type:"text",name:"category",value:f.category||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),(0,b.jsx)("input",{type:"text",name:"image",value:f.image||"",onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock Quantity"}),(0,b.jsx)("input",{type:"number",name:"stock_qty",value:f.stock_qty||0,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Order Quantity (MOQ)"}),(0,b.jsx)("input",{type:"number",name:"moq",value:f.moq||1,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]})]}),(0,b.jsxs)("fieldset",{className:"border p-4 rounded-md",children:[(0,b.jsx)("legend",{className:"text-sm font-medium text-gray-700 px-2",children:"Pricing"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Regular"}),(0,b.jsx)("input",{type:"number",name:k.UserRole.REGULAR,value:f.pricing?.[k.UserRole.REGULAR]||0,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Wholesaler"}),(0,b.jsx)("input",{type:"number",name:k.UserRole.WHOLESALER,value:f.pricing?.[k.UserRole.WHOLESALER]||0,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Distributor"}),(0,b.jsx)("input",{type:"number",name:k.UserRole.DISTRIBUTOR,value:f.pricing?.[k.UserRole.DISTRIBUTOR]||0,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Admin"}),(0,b.jsx)("input",{type:"number",name:k.UserRole.ADMIN,value:f.pricing?.[k.UserRole.ADMIN]||0,onChange:i,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end space-x-4 mt-8",children:[(0,b.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700",children:[a?"Update":"Save"," Product"]})]})]})]})})},n=()=>{let{token:a,currentRole:d}=(0,j.useRole)(),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),o=async()=>{if(!a||d!==k.UserRole.ADMIN){l("Unauthorized access"),h(!1);return}h(!0),l(null);try{let b=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${a}`,"X-User-Role":d}});if(!b.ok){let a=await b.json();throw Error(a.message||"Failed to fetch users")}let c=await b.json();f(c)}catch(a){l(a.message),console.error("Error fetching users:",a)}finally{h(!1)}};(0,c.useEffect)(()=>{o()},[a,d,m]);let p=async(b,c)=>{if(!a||d!==k.UserRole.ADMIN)return void alert("Unauthorized to change roles.");if(window.confirm(`Are you sure you want to change the role of ${b} to ${c}?`))try{let e=await fetch(`/api/admin/users/${b}/role`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`,"X-User-Role":d},body:JSON.stringify({role:c})});if(e.ok)alert(`User ${b} role updated to ${c} successfully!`),n(a=>!a);else{let a=await e.json();throw Error(a.message||"Failed to update user role")}}catch(a){alert(`Error updating role: ${a.message}`),console.error("Error updating user role:",a)}};return g?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading users..."}):i?(0,b.jsxs)("div",{className:"text-center py-8 text-red-600",children:["Error: ",i]}):a&&d===k.UserRole.ADMIN?(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"User Management"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full bg-white",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Email"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Company Name"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Current Role"}),(0,b.jsx)("th",{className:"py-2 px-4 border-b",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:e.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:a.email}),(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:a.companyName||"N/A"}),(0,b.jsx)("td",{className:"py-2 px-4 border-b",children:(0,b.jsx)("select",{value:a.role,onChange:b=>p(a.id,b.target.value),className:"border border-gray-300 rounded-md px-2 py-1 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:Object.values(k.UserRole).map(a=>(0,b.jsx)("option",{value:a,children:a},a))})}),(0,b.jsx)("td",{className:"py-2 px-4 border-b"})]},a.id))})]})})]}):(0,b.jsx)("div",{className:"text-center py-8 text-red-600",children:"Access Denied: Admin login required."})};a.s(["default",0,()=>{let{currentRole:a,loading:f}=(0,j.useRole)(),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),w=(0,d.useRouter)(),x=a=>{t(a),r(!0)},y=()=>{r(!1),t(null)};if((0,c.useEffect)(()=>{f||a===k.UserRole.ADMIN||w.push("/admin/login")},[a,f,w]),f||a!==k.UserRole.ADMIN)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-20 text-center",children:(0,b.jsx)("p",{className:"text-lg text-gray-600",children:"Loading admin panel or redirecting..."})});let z=async b=>{try{let c;if((c=b.id?await fetch(`/api/products/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Role":a},body:JSON.stringify(b)}):await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json","X-User-Role":a},body:JSON.stringify(b)})).ok)console.log("Product saved successfully!"),v(a=>!a),y();else{let a=await c.json();console.error("Failed to save product:",a.message||c.statusText),alert(`Failed to save product: ${a.message||c.statusText}`)}}catch(a){console.error("Error saving product:",a),alert("An error occurred while saving the product.")}},A=async b=>{if(window.confirm("Are you sure you want to delete this product?"))try{let c=await fetch(`/api/products/${b}`,{method:"DELETE",headers:{"X-User-Role":a}});if(c.ok)console.log("Product deleted successfully!"),v(a=>!a);else{let a=await c.json();console.error("Failed to delete product:",a.message||c.statusText),alert(`Failed to delete product: ${a.message||c.statusText}`)}}catch(a){console.error("Error deleting product:",a),alert("An error occurred while deleting the product.")}};return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Admin Dashboard"}),(0,b.jsxs)("button",{onClick:()=>x(null),className:"bg-emerald-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-emerald-700 transition-colors flex items-center",children:[(0,b.jsx)(i,{size:20,className:"mr-2"}),"Add New Product"]})]}),(0,b.jsx)(l,{onEdit:a=>x(a),onDelete:A,refreshTrigger:u}),q&&(0,b.jsx)(m,{product:s,onSave:z,onClose:y}),(0,b.jsx)(n,{}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,b.jsx)(g,{className:"w-6 h-6 text-blue-500 mr-2"})," Bulk Inventory Upload (Excel)"]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("input",{type:"file",accept:".xlsx, .xls",onChange:a=>{a.target.files&&a.target.files.length>0?p(a.target.files[0]):p(null)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"}),(0,b.jsx)("button",{onClick:()=>{o?(alert(`Simulating upload of ${o.name}. (Actual upload logic not implemented)`),p(null)):alert("Please select an Excel file to upload.")},disabled:!o,className:"px-6 py-2 bg-emerald-600 text-white font-semibold rounded-lg shadow-md hover:bg-emerald-700 disabled:bg-gray-400 transition-colors",children:"Upload"})]}),o&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected file: ",o.name]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center",children:[(0,b.jsx)(h,{className:"w-6 h-6 text-purple-500 mr-2"})," Monthly Sales Overview"]}),(0,b.jsx)("div",{className:"h-64 w-full bg-gray-50 rounded-lg p-4 flex items-end justify-around",children:e.map(a=>(0,b.jsxs)("div",{className:"flex flex-col items-center h-full justify-end",children:[(0,b.jsx)("div",{className:"bg-purple-400 rounded-t-md w-8 hover:bg-purple-600 transition-colors",style:{height:`${a.sales/Math.max(...e.map(a=>a.sales))*90}%`},title:`Sales in ${a.month}: ₹${a.sales.toLocaleString()}`}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:a.month})]},a.month))}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-4",children:"(This is a simplified chart. In a real application, a charting library would be used.)"})]})]})}],40117)}];

//# sourceMappingURL=Desktop_medical_src_app_admin_page_tsx_9e862f77._.js.map