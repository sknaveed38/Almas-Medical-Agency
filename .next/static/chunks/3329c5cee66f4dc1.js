(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75595,e=>{"use strict";e.s(["getSoonestExpiry",0,e=>e.batches&&0!==e.batches.length?[...e.batches].sort((e,t)=>new Date(e.expiry).getTime()-new Date(t.expiry).getTime())[0].expiry:null,"isNearExpiry",0,(e,t=3)=>{if(!e.batches||0===e.batches.length)return!1;let s=new Date,r=new Date;for(let a of(r.setMonth(s.getMonth()+t),e.batches)){let e=new Date(a.expiry);if(e<=r&&e>=s)return!0}return!1}])},68660,e=>{"use strict";var t=e.i(99493),s=e.i(72648),r=e.i(50072),a=e.i(36627),l=e.i(48274),n=e.i(75595),i=e.i(73219),o=e.i(3569);let d={"In stock":"bg-emerald-100 text-emerald-800","Low stock":"bg-yellow-100 text-yellow-800","Out of stock":"bg-red-100 text-red-800","Near expiry — discounted":"bg-blue-100 text-blue-800"};e.s(["default",0,({product:e})=>{let{currentRole:c,isLoggedIn:x}=(0,a.useRole)(),{addItem:m}=(0,o.useCart)(),u=(0,n.isNearExpiry)(e),g=(0,n.getSoonestExpiry)(e),h=(0,s.useRef)(null),p=e.stock_badge;u&&"Out of stock"!==e.stock_badge&&(p="Near expiry — discounted");let b="Out of stock"===p,f=e.pricing?.[c]||e.pricing?.[l.UserRole.REGULAR]||0;return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col justify-between hover:shadow-lg transition-shadow duration-300 bg-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative w-full h-40 bg-gray-100 rounded-md mb-4 flex items-center justify-center",children:[u&&(0,t.jsx)("div",{className:"absolute top-0 left-0 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-br-lg",children:"DEAL"}),(0,t.jsx)("img",{src:e.image,alt:e.name,className:"max-h-full max-w-full p-2 object-contain"}),(0,t.jsx)("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full ${d[p]}`,children:p})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:e.brand}),(0,t.jsx)("h3",{className:"text-md font-semibold text-gray-800 mt-1 truncate",title:e.name,children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.pack_size}),u&&g&&(0,t.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["Expires: ",new Date(g).toLocaleDateString()]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["MOQ: ",(0,t.jsxs)("span",{className:"font-bold text-gray-700",children:[e.moq," units"]})]})})]}),(0,t.jsxs)("div",{className:"mt-4",children:[x?(0,t.jsxs)("p",{className:"text-lg font-bold text-emerald-600",children:["number"==typeof f?`₹${f.toFixed(2)}`:"N/A",(0,t.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"/box"})]}):(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-500",children:[(0,t.jsx)(i.default,{href:"/login",className:"text-emerald-600 hover:underline",children:"Login"})," to view price"]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"number",min:e.moq,defaultValue:e.moq,className:"w-20 px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-emerald-500 text-center",disabled:b||!x,ref:h}),(0,t.jsxs)("button",{className:`w-full flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${b||!x?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"}`,disabled:b||!x,onClick:()=>{let t=parseInt(h.current?.value||"0",10);isNaN(t)||t<e.moq?alert(`Please enter a quantity of at least ${e.moq} units.`):(m(e,t),alert(`Added ${t} of ${e.name} to cart.`))},children:[(0,t.jsx)(r.ShoppingCart,{size:16,className:"mr-2"}),"Add"]})]}),b&&(0,t.jsx)("p",{className:"text-center text-red-600 text-xs mt-2",children:"Currently unavailable"}),!b&&(0,t.jsx)("p",{className:"text-center text-gray-500 text-xs mt-2",children:"Dispatch in 24-48 hrs"})]})]})}])}]);