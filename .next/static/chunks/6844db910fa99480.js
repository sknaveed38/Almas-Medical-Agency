(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75595,e=>{"use strict";e.s(["getSoonestExpiry",0,e=>e.batches&&0!==e.batches.length?[...e.batches].sort((e,t)=>new Date(e.expiry).getTime()-new Date(t.expiry).getTime())[0].expiry:null,"isNearExpiry",0,(e,t=3)=>{if(!e.batches||0===e.batches.length)return!1;let r=new Date,s=new Date;for(let a of(s.setMonth(r.getMonth()+t),e.batches)){let e=new Date(a.expiry);if(e<=s&&e>=r)return!0}return!1}])},68660,e=>{"use strict";var t=e.i(99493),r=e.i(72648),s=e.i(50072),a=e.i(36627),l=e.i(48274),i=e.i(75595),n=e.i(73219),c=e.i(3569);let o={"In stock":"bg-emerald-100 text-emerald-800","Low stock":"bg-yellow-100 text-yellow-800","Out of stock":"bg-red-100 text-red-800","Near expiry — discounted":"bg-blue-100 text-blue-800"};e.s(["default",0,({product:e})=>{let{currentRole:d,isLoggedIn:m}=(0,a.useRole)(),{addItem:x}=(0,c.useCart)(),u=(0,i.isNearExpiry)(e),g=(0,i.getSoonestExpiry)(e),h=(0,r.useRef)(null),p=e.stock_badge;u&&"Out of stock"!==e.stock_badge&&(p="Near expiry — discounted");let f="Out of stock"===p,b=e.pricing?.[d]||e.pricing?.[l.UserRole.REGULAR]||0;return(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 flex flex-col justify-between hover:shadow-lg transition-shadow duration-300 bg-white",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"relative w-full h-40 bg-gray-100 rounded-md mb-4 flex items-center justify-center",children:[u&&(0,t.jsx)("div",{className:"absolute top-0 left-0 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-br-lg",children:"DEAL"}),(0,t.jsx)("img",{src:e.image,alt:e.name,className:"max-h-full max-w-full p-2 object-contain"}),(0,t.jsx)("span",{className:`absolute top-2 right-2 text-xs font-semibold px-2 py-1 rounded-full ${o[p]}`,children:p})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 font-medium",children:e.brand}),(0,t.jsx)("h3",{className:"text-md font-semibold text-gray-800 mt-1 truncate",title:e.name,children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.pack_size}),u&&g&&(0,t.jsxs)("p",{className:"text-sm text-red-600 mt-1",children:["Expires: ",new Date(g).toLocaleDateString()]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["MOQ: ",(0,t.jsxs)("span",{className:"font-bold text-gray-700",children:[e.moq," units"]})]})})]}),(0,t.jsxs)("div",{className:"mt-4",children:[m?(0,t.jsxs)("p",{className:"text-lg font-bold text-emerald-600",children:["number"==typeof b?`₹${b.toFixed(2)}`:"N/A",(0,t.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"/box"})]}):(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-500",children:[(0,t.jsx)(n.default,{href:"/login",className:"text-emerald-600 hover:underline",children:"Login"})," to view price"]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"number",min:e.moq,defaultValue:e.moq,className:"w-20 px-2 py-1.5 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-emerald-500 text-center",disabled:f||!m,ref:h}),(0,t.jsxs)("button",{className:`w-full flex items-center justify-center px-3 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${f||!m?"bg-gray-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"}`,disabled:f||!m,onClick:()=>{let t=parseInt(h.current?.value||"0",10);isNaN(t)||t<e.moq?alert(`Please enter a quantity of at least ${e.moq} units.`):(x(e,t),alert(`Added ${t} of ${e.name} to cart.`))},children:[(0,t.jsx)(s.ShoppingCart,{size:16,className:"mr-2"}),"Add"]})]}),f&&(0,t.jsx)("p",{className:"text-center text-red-600 text-xs mt-2",children:"Currently unavailable"}),!f&&(0,t.jsx)("p",{className:"text-center text-gray-500 text-xs mt-2",children:"Dispatch in 24-48 hrs"})]})]})}])},79137,e=>{"use strict";var t=e.i(99493),r=e.i(72648),s=e.i(68660),a=e.i(48274),l=e.i(75595);let i=(0,e.i(30631).default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var n=e.i(89737);e.s(["default",0,()=>{let e=(0,n.useSearchParams)(),[c,o]=(0,r.useState)([]),[d,m]=(0,r.useState)("All"),[x,u]=(0,r.useState)("All"),[g,h]=(0,r.useState)("name-asc"),[p,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{let e=await fetch("/api/products");o(await e.json())})()},[]),(0,r.useEffect)(()=>{let t=e.get("category");t&&m(t),"near"===e.get("expiry")&&f(!0)},[e]);let b=(0,r.useMemo)(()=>["All",...new Set(c.map(e=>e.category))].sort(),[c]),y=(0,r.useMemo)(()=>["All",...new Set(c.map(e=>e.brand))].sort(),[c]),j=(0,r.useMemo)(()=>{let e=c;return"All"!==d&&(e=e.filter(e=>e.category===d)),"All"!==x&&(e=e.filter(e=>e.brand===x)),p&&(e=e.filter(e=>(0,l.isNearExpiry)(e))),e.sort((e,t)=>{switch(g){case"name-asc":return e.name.localeCompare(t.name);case"price-asc":return e.pricing[a.UserRole.REGULAR]-t.pricing[a.UserRole.REGULAR];case"price-desc":let r=e.pricing[a.UserRole.REGULAR];return t.pricing[a.UserRole.REGULAR]-r;case"expiry-asc":let s=e=>new Date(e.batches&&0!==e.batches.length?Math.min(...e.batches.map(e=>new Date(e.expiry).getTime())):"9999-12-31");return s(e).getTime()-s(t).getTime();default:return 0}}),e},[c,d,x,g,p]);return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Wholesale Catalogue"}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8 flex flex-wrap items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i,{className:"w-5 h-5 text-gray-600"}),(0,t.jsx)("label",{htmlFor:"category-filter",className:"text-gray-700 font-medium",children:"Category:"}),(0,t.jsx)("select",{id:"category-filter",value:d,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:b.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"brand-filter",className:"text-gray-700 font-medium",children:"Brand:"}),(0,t.jsx)("select",{id:"brand-filter",value:x,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:y.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("label",{htmlFor:"sort-by",className:"text-gray-700 font-medium",children:"Sort By:"}),(0,t.jsxs)("select",{id:"sort-by",value:g,onChange:e=>h(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500",children:[(0,t.jsx)("option",{value:"name-asc",children:"Name (A-Z)"}),(0,t.jsx)("option",{value:"price-asc",children:"Price (Low to High)"}),(0,t.jsx)("option",{value:"price-desc",children:"Price (High to Low)"}),(0,t.jsx)("option",{value:"expiry-asc",children:"Near Expiry First"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"near-expiry-checkbox",checked:p,onChange:e=>f(e.target.checked),className:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"near-expiry-checkbox",className:"text-gray-700 font-medium",children:"Show Near Expiry Deals"})]})]}),j.length>0?(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:j.map(e=>(0,t.jsx)(s.default,{product:e},e.id))}):(0,t.jsxs)("div",{className:"text-center py-10",children:[(0,t.jsx)("p",{className:"text-lg text-gray-600",children:"No products found matching your criteria."}),(0,t.jsx)("p",{className:"text-md text-gray-500",children:"Try adjusting your filters or search terms."})]})]})}],79137)}]);